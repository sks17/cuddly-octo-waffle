---
import BaseLayout from '../layouts/BaseLayout.astro';
import HomepageContact from '../components/HomepageContact.astro';
import { getRegistryBlogs, getFeaturedBlogs } from '../data/blogRegistry.ts';

const title = 'Blogs & Misc';
const description = 'Articles, thoughts, and miscellaneous content.';
const allBlogs = getRegistryBlogs();
const featuredBlogs = getFeaturedBlogs();
---

<BaseLayout title={title} description={description}>
	<div class="stack gap-12 lg:gap-20">
		<div class="wrapper stack gap-8 lg:gap-12">
			<header class="page-header">
				<h1>Blogs & Misc</h1>
				<p>Thoughts on technology, design, and the spaces between.</p>
			</header>
		</div>

		<!-- Blogs Section -->
		<section class="wrapper">
			<div class="section-header">
				<h2>Blogs</h2>
			</div>
			
			{allBlogs.length > 0 ? (
				<div class="editorial-grid">
					{allBlogs.map((blog) => (
						<article class="blog-entry">
							<a href={`/blogs/${blog.id}`} class="blog-link">
								<div class="blog-image">
									<img 
										src={blog.featuredImage} 
										alt={blog.featuredImageAlt}
										loading="lazy"
									/>
								</div>
								<div class="blog-content">
									<header class="blog-header">
										{blog.category && (
											<span class="blog-category">{blog.category.toUpperCase()}</span>
										)}
										<h3 class="blog-title">{blog.title}</h3>
									</header>
									<p class="blog-description">{blog.description}</p>
									<footer class="blog-meta">
										<time class="blog-date">
											{blog.publishDate.toLocaleDateString('en-US', { 
												year: 'numeric', 
												month: 'long', 
												day: 'numeric' 
											})}
										</time>
										{blog.readTime && (
											<span class="blog-read-time">{blog.readTime}</span>
										)}
									</footer>
								</div>
							</a>
						</article>
					))}
				</div>
			) : (
				<div class="empty-state">
					<p>No blog posts yet. Check back soon for insights and updates.</p>
				</div>
			)}
		</section>

		<!-- Misc Section -->
		<section class="wrapper">
			<div class="section-header">
				<h2>Misc</h2>
			</div>
			<div class="misc-content">
				<!-- Intentionally empty - ready for future content -->
			</div>
		</section>

		<HomepageContact />
	</div>
</BaseLayout>

<style>
	.page-header h1 {
		font-size: var(--text-4xl);
		color: var(--gray-0);
		margin: 0;
	}

	.page-header p {
		color: var(--gray-400);
		font-size: var(--text-lg);
		margin: 0.5rem 0 0;
	}

	/* Section Headers */
	.section-header {
		margin-bottom: 2.5rem;
	}

	.section-header h2 {
		font-size: var(--text-2xl);
		color: var(--gray-200);
		margin: 0;
		font-weight: 600;
		position: relative;
		padding-bottom: 1rem;
	}

	.section-header h2::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		width: 3rem;
		height: 2px;
		background: var(--accent-regular);
	}

	/* Editorial Blog Grid */
	.editorial-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
		gap: 3rem 2.5rem;
		margin-bottom: 4rem;
	}

	.blog-entry {
		background: var(--gray-999);
		border: 1px solid var(--gray-800);
		border-radius: 0.5rem;
		overflow: hidden;
		transition: all 0.3s ease;
		height: fit-content;
	}

	.blog-entry:hover {
		border-color: var(--gray-700);
		box-shadow: var(--shadow-lg);
		transform: translateY(-2px);
	}

	.blog-link {
		display: block;
		text-decoration: none;
		color: inherit;
		height: 100%;
	}

	.blog-image {
		width: 100%;
		height: 240px;
		overflow: hidden;
		background: var(--gray-900);
		position: relative;
	}

	.blog-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.3s ease;
	}

	.blog-entry:hover .blog-image img {
		transform: scale(1.02);
	}

	.blog-content {
		padding: 2rem;
	}

	.blog-header {
		margin-bottom: 1rem;
	}

	.blog-category {
		display: inline-block;
		font-size: var(--text-xs);
		font-weight: 700;
		color: var(--accent-light);
		letter-spacing: 0.1em;
		margin-bottom: 0.75rem;
		font-family: var(--font-mono);
	}

	.blog-title {
		font-size: var(--text-xl);
		color: var(--gray-0);
		margin: 0;
		font-weight: 700;
		line-height: 1.3;
		letter-spacing: -0.02em;
	}

	.blog-description {
		color: var(--gray-300);
		font-size: var(--text-base);
		line-height: 1.6;
		margin: 1rem 0 1.5rem;
	}

	.blog-meta {
		display: flex;
		justify-content: space-between;
		align-items: center;
		font-size: var(--text-sm);
		color: var(--gray-500);
		font-family: var(--font-mono);
	}

	.blog-date {
		color: var(--gray-400);
	}

	.blog-read-time {
		color: var(--gray-500);
		font-style: italic;
	}

	/* Empty States */
	.empty-state {
		padding: 4rem 2rem;
		text-align: center;
		background: var(--gray-999_60);
		border: 1px solid var(--gray-800);
		border-radius: 0.5rem;
		margin-bottom: 4rem;
	}

	.empty-state p {
		color: var(--gray-400);
		font-size: var(--text-lg);
		margin: 0;
	}

	/* Misc Section Styling */
	.misc-content {
		min-height: 6rem;
		/* Ready for future content - no placeholder styling */
	}

	/* Responsive Design */
	@media (max-width: 50em) {
		.editorial-grid {
			grid-template-columns: 1fr;
			gap: 2rem;
		}

		.blog-image {
			height: 200px;
		}

		.blog-content {
			padding: 1.5rem;
		}

		.blog-title {
			font-size: var(--text-lg);
		}
	}

	@media (min-width: 75em) {
		.editorial-grid {
			grid-template-columns: repeat(2, 1fr);
			gap: 4rem 3rem;
		}
	}
</style>
